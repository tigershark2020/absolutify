(function(){'use strict';function replace(str,url){var url_array=url.split("/") str=str.replace(replace.slash_rx,'$1'+url_array[0]+url_array[2]+'/') if(typeof url==='function')return replace.iterate(str,url) return str.replace(replace.rx,'$1'+url+'/$4')} replace.slash_rx=/((href|src|codebase|cite|background|cite|action|profile|formaction|icon|manifest|archive)=["'])(\/)/g replace.rx=/((href|src|codebase|cite|background|cite|action|profile|formaction|icon|manifest|archive)=["'])(([.]+\/)|(?=#))(?!\/)/g replace.captureRx=/((href|src|codebase|cite|background|cite|action|profile|formaction|icon|manifest|archive)=["'])((([.]+\/)|(?:\/)|(?:#))(?!\/)[a-zA-Z0-9._-]+)/g replace.iterate=function(str,iterator){return str.replace(replace.captureRx,function(full,prefix,prop,url){return prefix+iterator(url,prop)})} if(typeof exports!=='undefined')module.exports=replace else this.absolutify=replace}.call(this))
